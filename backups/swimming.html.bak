<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataGym Analyze | Swimming</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- MediaPipe Pose -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
        crossorigin="anonymous"></script>
</head>

<body>

    <!-- Background Animation -->
    <div class="bg-gradient-animation"></div>

    <!-- Sidebar injected by common.js -->

    <!-- Main Content -->
    <main class="main-content">
        <div id="module-swimming" class="module-content">
            <header class="page-header">
                <h1 class="page-title" data-i18n="swim_title">Swimming Analysis</h1>
                <p class="text-secondary" data-i18n="swim_subtitle">Performance calculations and AI technique analysis
                </p>
            </header>

            <!-- Tabs -->
            <ul class="nav nav-tabs" id="swimTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="swim-css-tab" data-bs-toggle="tab"
                        data-bs-target="#swim-css-pane" type="button" role="tab" data-i18n="swim_tab_css">
                        <ion-icon name="person-outline" class="me-2"></ion-icon>Profile
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="swim-zones-tab" data-bs-toggle="tab" data-bs-target="#swim-zones-pane"
                        type="button" role="tab" data-i18n="swim_tab_zones">
                        <ion-icon name="stats-chart-outline" class="me-2"></ion-icon>Zones
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="swim-builder-tab" data-bs-toggle="tab"
                        data-bs-target="#swim-builder-pane" type="button" role="tab" data-i18n="swim_tab_builder">
                        <ion-icon name="barbell-outline" class="me-2"></ion-icon>Series
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="swim-tech-tab" data-bs-toggle="tab" data-bs-target="#swim-tech-pane"
                        type="button" role="tab" data-i18n="swim_tab_tech">
                        <ion-icon name="flash-outline" class="me-2"></ion-icon>Técnica
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="swim-health-tab" data-bs-toggle="tab"
                        data-bs-target="#swim-health-pane" type="button" role="tab" data-i18n="swim_tab_health">
                        <ion-icon name="heart-outline" class="me-2"></ion-icon>Salud
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="swim-ai-tab" data-bs-toggle="tab" data-bs-target="#swim-ai-pane"
                        type="button" role="tab" data-i18n="swim_tab_ai">
                        <ion-icon name="videocam-outline" class="me-2"></ion-icon>AI Analyzer
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="swimTabsContent">

                <!-- 1. CSS Profile Tab -->
                <div class="tab-pane fade show active" id="swim-css-pane" role="tabpanel">

                    <!-- Mode Selector -->
                    <div class="glass-card p-2 mb-4 d-flex gap-2 bg-light bg-opacity-10">
                        <button class="btn btn-sm flex-fill fw-bold active-mode-btn" id="btnModeTest"
                            onclick="switchCssMode('test')">
                            <ion-icon name="timer-outline" class="me-2"></ion-icon>Test Real (Preciso)
                        </button>
                        <button class="btn btn-sm flex-fill fw-bold text-secondary" id="btnModeEst"
                            onclick="switchCssMode('estimate')">
                            <ion-icon name="trending-up-outline" class="me-2"></ion-icon>Estimación (Rápida)
                        </button>
                    </div>

                    <div class="row g-4">
                        <!-- INPUT COLUMN -->
                        <div class="col-md-5">
                            <div class="glass-card h-100 position-relative overflow-hidden">

                                <!-- TEST MODE INPUTS -->
                                <div id="divCssTestMode" class="animate-fade-in">
                                    <div
                                        class="alert alert-primary bg-primary bg-opacity-10 border-primary border-opacity-25 d-flex align-items-start small p-3 mb-4">
                                        <ion-icon name="timer" class="fs-5 me-2 text-primary mt-1"></ion-icon>
                                        <div>
                                            <strong class="text-primary">Protocolo Estándar</strong>
                                            <p class="mb-0 text-secondary">Introduce los tiempos de dos pruebas máximas
                                                (400m y 200m).</p>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label text-uppercase text-secondary small fw-bold">Test
                                            400m</label>
                                        <div
                                            class="d-flex align-items-center gap-2 border rounded p-2 bg-dark bg-opacity-50 border-secondary border-opacity-25">
                                            <input type="number" id="cssT400m"
                                                class="form-control bg-transparent border-0 text-center fw-mono fs-4 p-0 text-white"
                                                placeholder="00">
                                            <span class="text-secondary small fw-bold">MIN</span>
                                            <span class="fs-4 text-secondary">:</span>
                                            <input type="number" id="cssT400s"
                                                class="form-control bg-transparent border-0 text-center fw-mono fs-4 p-0 text-white"
                                                placeholder="00">
                                            <span class="text-secondary small fw-bold">SEG</span>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="form-label text-uppercase text-secondary small fw-bold">Test
                                            200m</label>
                                        <div
                                            class="d-flex align-items-center gap-2 border rounded p-2 bg-dark bg-opacity-50 border-secondary border-opacity-25">
                                            <input type="number" id="cssT200m"
                                                class="form-control bg-transparent border-0 text-center fw-mono fs-4 p-0 text-white"
                                                placeholder="00">
                                            <span class="text-secondary small fw-bold">MIN</span>
                                            <span class="fs-4 text-secondary">:</span>
                                            <input type="number" id="cssT200s"
                                                class="form-control bg-transparent border-0 text-center fw-mono fs-4 p-0 text-white"
                                                placeholder="00">
                                            <span class="text-secondary small fw-bold">SEG</span>
                                        </div>
                                    </div>

                                    <button class="btn btn-primary w-100 py-3 fw-bold shadow-lg" id="btnCalcCSS_Test">
                                        <ion-icon name="pulse" class="me-2"></ion-icon> Calcular Zonas Exactas
                                    </button>
                                </div>

                                <!-- ESTIMATE MODE INPUTS -->
                                <div id="divCssEstMode" class="d-none animate-fade-in">
                                    <div
                                        class="alert alert-info bg-info bg-opacity-10 border-info border-opacity-25 d-flex align-items-start small p-3 mb-4">
                                        <ion-icon name="information-circle" class="fs-5 me-2 text-info mt-1"></ion-icon>
                                        <div>
                                            <strong class="text-info">¿Cómo funciona?</strong>
                                            <p class="mb-0 text-secondary">Basado en tu mejor 100m y tu perfil de
                                                atleta.</p>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="form-label text-uppercase text-secondary small fw-bold">Mejor 100m
                                            (Max Esfuerzo)</label>
                                        <div
                                            class="d-flex align-items-center gap-2 border rounded p-2 bg-dark bg-opacity-50 border-secondary border-opacity-25">
                                            <input type="number" id="cssT100m"
                                                class="form-control bg-transparent border-0 text-center fw-mono fs-4 p-0 text-white"
                                                placeholder="00">
                                            <span class="text-secondary small fw-bold">MIN</span>
                                            <span class="fs-4 text-secondary">:</span>
                                            <input type="number" id="cssT100s"
                                                class="form-control bg-transparent border-0 text-center fw-mono fs-4 p-0 text-white"
                                                placeholder="00">
                                            <span class="text-secondary small fw-bold">SEG</span>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label
                                            class="form-label text-uppercase text-secondary small fw-bold mb-3">Perfil
                                            de Nadador</label>
                                        <div class="row g-2">
                                            <div class="col-4">
                                                <input type="radio" class="btn-check" name="athleteProfile"
                                                    id="profileSprinter" value="sprinter" autocomplete="off">
                                                <label
                                                    class="btn btn-outline-light w-100 h-100 p-2 d-flex flex-column align-items-center justify-content-center group-hover-glow"
                                                    for="profileSprinter">
                                                    <ion-icon name="flash" class="mb-1 fs-5 text-warning"></ion-icon>
                                                    <span class="small fw-bold">Velocista</span>
                                                    <span class="text-secondary"
                                                        style="font-size: 0.65rem;">Explosivo</span>
                                                </label>
                                            </div>
                                            <div class="col-4">
                                                <input type="radio" class="btn-check" name="athleteProfile"
                                                    id="profileMixed" value="mixed" autocomplete="off" checked>
                                                <label
                                                    class="btn btn-outline-light w-100 h-100 p-2 d-flex flex-column align-items-center justify-content-center group-hover-glow"
                                                    for="profileMixed">
                                                    <ion-icon name="pulse" class="mb-1 fs-5 text-primary"></ion-icon>
                                                    <span class="small fw-bold">Mixto</span>
                                                    <span class="text-secondary"
                                                        style="font-size: 0.65rem;">Estándar</span>
                                                </label>
                                            </div>
                                            <div class="col-4">
                                                <input type="radio" class="btn-check" name="athleteProfile"
                                                    id="profileDistance" value="distance" autocomplete="off">
                                                <label
                                                    class="btn btn-outline-light w-100 h-100 p-2 d-flex flex-column align-items-center justify-content-center group-hover-glow"
                                                    for="profileDistance">
                                                    <ion-icon name="infinite" class="mb-1 fs-5 text-success"></ion-icon>
                                                    <span class="small fw-bold">Fondista</span>
                                                    <span class="text-secondary"
                                                        style="font-size: 0.65rem;">Diesel</span>
                                                </label>
                                            </div>
                                        </div>
                                        <p class="text-center text-secondary small mt-2 fst-italic" id="profileDesc">
                                            Equilibrio ideal velocidad/resistencia.</p>
                                    </div>

                                    <button class="btn btn-primary w-100 py-3 fw-bold shadow-lg" id="btnCalcCSS_Est">
                                        <ion-icon name="options" class="me-2"></ion-icon> Calcular Perfil
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- RESULT COLUMN -->
                        <div class="col-md-7">
                            <div class="glass-card h-100 d-flex flex-column justify-content-center align-items-center position-relative overflow-hidden"
                                id="cssResultContainer">

                                <!-- Background Decorative Blobs -->
                                <div class="position-absolute top-0 end-0 p-5 bg-primary rounded-circle opacity-10 blur-3xl"
                                    style="width: 200px; height: 200px; filter: blur(60px);"></div>
                                <div class="position-absolute bottom-0 start-0 p-5 bg-secondary rounded-circle opacity-10 blur-3xl"
                                    style="width: 200px; height: 200px; filter: blur(60px);"></div>

                                <!-- Default State -->
                                <div id="cssPlaceholder" class="text-center opacity-50 z-1">
                                    <ion-icon name="water" class="display-1 mb-3 text-secondary"></ion-icon>
                                    <h5 class="text-secondary fw-light">Introduce datos para ver tu motor aeróbico</h5>
                                </div>

                                <!-- Result State -->
                                <div id="cssResults" class="d-none w-100 position-relative z-1 animate-fade-in px-4">
                                    <div class="d-flex justify-content-between align-items-start mb-4">
                                        <div>
                                            <h4 class="fw-bold mb-0 text-white">Tu Motor Aeróbico</h4>
                                            <p class="text-secondary small mb-0" id="cssMethodLabel">Basado en test real
                                            </p>
                                        </div>
                                        <span class="badge bg-dark border border-secondary text-info font-monospace">CSS
                                            v4.0</span>
                                    </div>

                                    <div
                                        class="d-flex bg-dark bg-opacity-50 border border-secondary border-opacity-25 rounded-4 overflow-hidden mb-4">
                                        <div
                                            class="flex-fill p-4 text-center border-end border-secondary border-opacity-25">
                                            <small class="text-secondary text-uppercase fw-bold ls-2 d-block mb-1"
                                                style="font-size: 0.65rem;">Velocidad Umbral</small>
                                            <h2 class="display-5 fw-bold text-white mb-0" id="resCssSpeed">0.00</h2>
                                            <small class="text-secondary">m/s</small>
                                        </div>
                                        <div class="flex-fill p-4 text-center">
                                            <small class="text-secondary text-uppercase fw-bold ls-2 d-block mb-1"
                                                style="font-size: 0.65rem;">Ritmo Base / 100m</small>
                                            <h2 class="display-5 fw-bold text-info mb-0" id="resCssPace">--:--</h2>
                                            <small class="text-secondary">minutos</small>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button class="btn btn-outline-light btn-sm rounded-pill px-4"
                                            onclick="document.getElementById('swim-zones-tab').click()">
                                            Ver Zonas de Entrenamiento <ion-icon name="arrow-forward"
                                                class="ms-1 align-middle"></ion-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Zones & Styles Tab -->
                <div class="tab-pane fade" id="swim-zones-pane" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-4 p-3 glass-card">
                        <h4 class="mb-0 fw-bold"><ion-icon name="stats-chart" class="me-2 text-warning"></ion-icon> Tus
                            Zonas de Trabajo</h4>
                        <select class="form-select w-auto bg-dark border-secondary text-white" id="selZoneStyle">
                            <option value="freestyle">Crol (Libre)</option>
                            <option value="backstroke">Espalda</option>
                            <option value="breaststroke">Braza</option>
                            <option value="butterfly">Mariposa</option>
                        </select>
                    </div>

                    <div id="zonesTableContainer" class="d-flex flex-column gap-3">
                        <div class="text-center py-5 glass-card dashed-border">
                            <ion-icon name="alert-circle-outline"
                                class="display-3 text-secondary opacity-25 mb-2"></ion-icon>
                            <p class="text-secondary">Calcula tu perfil CSS primero para desbloquear las zonas.</p>
                        </div>
                    </div>
                </div>

                <!-- 3. Workout Builder Tab -->
                <div class="tab-pane fade" id="swim-builder-pane" role="tabpanel">
                    <div class="glass-card">
                        <h4 class="mb-4 fw-bold"><ion-icon name="construct" class="me-2 text-success"></ion-icon>
                            Planificador de Series</h4>

                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="d-flex gap-3 mb-3">
                                    <div class="flex-fill">
                                        <label
                                            class="text-secondary small text-uppercase fw-bold mb-1 ps-1">Estilo</label>
                                        <select class="form-select" id="wbStyle">
                                            <option value="freestyle">Crol</option>
                                            <option value="backstroke">Espalda</option>
                                            <option value="breaststroke">Braza</option>
                                            <option value="butterfly">Mariposa</option>
                                        </select>
                                    </div>
                                    <div class="flex-fill">
                                        <label
                                            class="text-secondary small text-uppercase fw-bold mb-1 ps-1">Distancia</label>
                                        <select class="form-select" id="wbDist">
                                            <option value="25">25m</option>
                                            <option value="50">50m</option>
                                            <option value="100">100m</option>
                                            <option value="200">200m</option>
                                            <option value="400">400m</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-secondary small text-uppercase fw-bold mb-1 ps-1">Zona de
                                        Intensidad</label>
                                    <select class="form-select" id="wbZone">
                                        <!-- Options injected by JS or static -->
                                        <option value="rec">Recuperación (Rec)</option>
                                        <option value="en1">Aeróbico Ligero (En-1)</option>
                                        <option value="en2">Umbral Anaeróbico (En-2)</option>
                                        <option value="en3">VO2 Max (En-3)</option>
                                        <option value="sp">Sprint (Sp)</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div
                                    class="h-100 bg-dark bg-opacity-50 rounded-4 border border-secondary border-opacity-25 p-4 position-relative overflow-hidden text-center d-flex flex-column justify-content-center">
                                    <!-- Dynamic Top Border Color -->
                                    <div id="wbZoneColorBar"
                                        class="position-absolute top-0 start-0 w-100 h-1 bg-gradient-to-r from-blue-500 to-purple-500"
                                        style="height: 4px;"></div>

                                    <p class="text-secondary text-uppercase small ls-2 mb-2">Tiempo Objetivo</p>
                                    <h1 class="display-3 fw-bold text-white mb-3 tracking-tight" id="wbTargetTime">--:--
                                    </h1>

                                    <div class="border-top border-secondary border-opacity-25 pt-3 mt-2 text-start">
                                        <span class="text-secondary text-uppercase small fw-bold">Descanso
                                            Sugerido:</span>
                                        <p class="text-light small mt-1 mb-0 lh-sm" id="wbRestAdvice">Selecciona
                                            parámetros...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="wbAlert"
                            class="alert alert-danger border-0 bg-danger bg-opacity-10 text-danger d-none small">
                            <ion-icon name="warning" class="me-2"></ion-icon>
                            <strong>Alerta Metodológica:</strong> Si reduces el descanso en series de Sprint, dejas de
                            entrenar velocidad pura y pasas a resistencia anaeróbica. ¡Respeta la pausa larga!
                        </div>
                    </div>
                </div>

                <!-- 4. Technique (SWOLF) Tab -->
                <div class="tab-pane fade" id="swim-tech-pane" role="tabpanel">
                    <div class="glass-card mb-4">
                        <h4 class="mb-4 fw-bold"><ion-icon name="flash" class="me-2 text-warning"></ion-icon> Analizador
                            SWOLF</h4>

                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="col-md-4">
                                    <label class="text-secondary small text-uppercase fw-bold mb-1 ps-1">Tiempo
                                        (MM:SS)</label>
                                    <input type="text" class="form-control fs-4 fw-mono" id="swolfTime"
                                        placeholder="1:00">
                                </div>
                                <div class="col-md-4">
                                    <label class="text-secondary small text-uppercase fw-bold mb-1 ps-1">Brazadas
                                        (Ciclos)</label>
                                    <input type="number" class="form-control fs-4 fw-mono" id="swolfStrokes"
                                        placeholder="00">
                                </div>
                                <div class="col-md-4">
                                    <label class="text-secondary small text-uppercase fw-bold mb-1 ps-1">Piscina</label>
                                    <select class="form-select fs-4" id="swolfLength">
                                        <option value="25">25 metros</option>
                                        <option value="50">50 metros</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-warning w-100 mt-4 fw-bold text-dark" id="btnCalcSwolf">
                                Calcular Eficiencia
                            </button>
                        </div>

                        <div id="swolfResult"
                            class="d-none animate-fade-in glass-card border-warning border-opacity-25 bg-warning bg-opacity-5">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <p class="text-warning text-uppercase small fw-bold mb-0">Tu Score SWOLF</p>
                                    <h1 class="display-3 fw-bold text-white mb-0" id="resSwolfScore">0</h1>
                                </div>
                                <div class="text-end border-start border-warning border-opacity-25 ps-4">
                                    <p class="text-light mb-0" id="resSwolfFeedback">--</p>
                                </div>
                            </div>

                            <div class="row mt-3 pt-3 border-top border-warning border-opacity-10 text-center">
                                <div class="col-6 border-end border-warning border-opacity-25">
                                    <h2 class="fw-bold text-white mb-0" id="resSwimFreq">0</h2>
                                    <small class="text-secondary text-uppercase" style="font-size: 0.7rem;">Frecuencia
                                        (SPM)</small>
                                    <div class="small text-muted font-monospace" id="resSwimHz"
                                        style="font-size: 0.7rem;">0.00 Hz</div>
                                </div>
                                <div class="col-6">
                                    <h2 class="fw-bold text-white mb-0" id="resSwimAmp">0.00</h2>
                                    <small class="text-secondary text-uppercase" style="font-size: 0.7rem;">Amplitud
                                        (m/ciclo)</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 5. Health (ACWR) Tab -->
                    <div class="tab-pane fade" id="swim-health-pane" role="tabpanel">
                        <div class="glass-card">
                            <h4 class="mb-4 fw-bold"><ion-icon name="heart" class="me-2 text-danger"></ion-icon>
                                Prevención
                                de Lesiones</h4>

                            <div class="row g-4 mb-4">
                                <div class="col-md-6">
                                    <div
                                        class="p-3 border border-secondary border-opacity-25 rounded-4 bg-dark bg-opacity-25">
                                        <label class="text-secondary small text-uppercase fw-bold mb-1">Carga Aguda (7
                                            días)</label>
                                        <input type="number"
                                            class="form-control fs-4 fw-mono border-0 bg-transparent text-white p-0"
                                            id="acwrAcute" placeholder="0">
                                        <span class="text-secondary small">Metros o Unidades de Carga esta semana</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div
                                        class="p-3 border border-secondary border-opacity-25 rounded-4 bg-dark bg-opacity-25">
                                        <label class="text-secondary small text-uppercase fw-bold mb-1">Carga Crónica
                                            (28
                                            días)</label>
                                        <input type="number"
                                            class="form-control fs-4 fw-mono border-0 bg-transparent text-white p-0"
                                            id="acwrChronic" placeholder="0">
                                        <span class="text-secondary small">Media semanal del último mes</span>
                                    </div>
                                </div>
                            </div>

                            <button class="btn btn-outline-danger w-100 fw-bold" id="btnCalcAcwr">Calcular
                                Riesgo</button>
                        </div>

                        <div id="acwrResult" class="d-none animate-fade-in glass-card">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <span class="text-uppercase small fw-bold opacity-75">Ratio ACWR</span>
                                    <h2 class="display-4 fw-bold mb-0" id="resAcwrRatio">0.00</h2>
                                </div>
                                <div class="text-end">
                                    <h5 class="fw-bold mb-1" id="resAcwrStatus">--</h5>
                                    <span class="badge bg-dark border" id="resAcwrZone">Zona...</span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- AI Analyzer Tab -->
                    <div class="tab-pane fade" id="swim-ai-pane" role="tabpanel">
                        <!-- Existing AI content -->
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="glass-card position-relative overflow-hidden">
                                    <!-- Decorative Background Glow -->
                                    <div class="position-absolute top-0 start-50 translate-middle"
                                        style="width: 300px; height: 300px; background: radial-gradient(circle, rgba(67, 97, 238, 0.15), transparent 70%); z-index: 0; pointer-events: none;">
                                    </div>

                                    <h5 class="mb-4 position-relative" data-i18n="video_upload_title">Video Upload</h5>

                                    <!-- Modern Upload Area -->
                                    <div class="upload-area mb-4 position-relative" id="swimUploadArea"
                                        style="border-style: solid; border-width: 1px; background: rgba(15, 23, 42, 0.3);">
                                        <div class="position-relative z-2">
                                            <div
                                                class="bg-primary bg-opacity-10 p-4 rounded-circle d-inline-flex mb-3 text-primary">
                                                <ion-icon name="cloud-upload" class="fs-1"></ion-icon>
                                            </div>
                                            <h4 data-i18n="drop_video_text" class="fw-bold">Drop fit video here</h4>
                                            <p class="text-secondary small mb-3" data-i18n="video_formats">MP4, MOV,
                                                WEBM
                                                (Max
                                                50MB)</p>
                                            <input type="file" id="swimVideoInput" accept="video/*" class="d-none">
                                            <div class="d-flex gap-2 justify-content-center">
                                                <button class="btn btn-outline-light btn-sm" id="btnSwimSelectFile"
                                                    data-i18n="btn_select_file">Browse Files</button>
                                                <!-- <button class="btn btn-outline-primary btn-sm" id="btnSwimDemo">Try
                                                Demo</button> -->
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Video Player & Analysis Container -->
                                    <div class="position-relative mb-4 rounded overflow-hidden shadow-lg border border-secondary border-opacity-25 d-none"
                                        id="swimVideoContainer" style="min-height: 300px; background: #000;">

                                        <video id="swimVideoPlayer" class="w-100 h-100 object-fit-cover" controls muted
                                            playsinline></video>
                                        <canvas id="swimCanvas" class="position-absolute top-0 start-0 w-100 h-100"
                                            style="pointer-events: none;"></canvas>

                                        <!-- AI Scanner Overlay -->
                                        <div id="swimAiOverlay"
                                            class="ai-status-overlay d-flex flex-column justify-content-center align-items-center position-absolute top-0 start-0 w-100 h-100 d-none"
                                            style="background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(4px); z-index: 20;">
                                            <div class="text-center">
                                                <div class="spinner-border text-info mb-3"
                                                    style="width: 3rem; height: 3rem; border-width: 3px;" role="status">
                                                </div>
                                                <h4 class="text-white fw-bold ai-pulse-text font-monospace">ANALYZING
                                                    BIOMECHANICS...</h4>
                                                <p class="text-info small font-monospace" id="swimProcessStatus">
                                                    DETECTING
                                                    STROKE PATTERNS</p>
                                            </div>
                                            <div class="ai-scanner-line"
                                                style="background: linear-gradient(90deg, transparent, #0ea5e9, transparent);">
                                            </div>
                                        </div>
                                    </div>



                                    <!-- Result Dashboard -->
                                    <div class="ai-result-box bg-transparent border-0 p-0" id="swimResultBox">

                                        <!-- Empty State -->
                                        <div class="text-center py-5 border rounded-3 bg-dark bg-opacity-25 border-secondary border-opacity-25 border-dashed"
                                            id="swimResultEmpty">
                                            <ion-icon name="stats-chart-outline"
                                                class="display-3 text-secondary opacity-25 mb-3"></ion-icon>
                                            <p class="text-secondary mb-0" data-i18n="ai_waiting_text">Upload a video to
                                                unlock insights</p>
                                        </div>

                                        <!-- Mock Result (Hidden) -->
                                        <div class="d-none animate-fade-in" id="aiOutputMock">
                                            <!-- JS will inject dashboard here -->
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="col-lg-4">
                                <div class="glass-card">
                                    <h5 class="mb-4" data-i18n="context_title">Context</h5>
                                    <form>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="stroke_label">Stroke to Analyze</label>
                                            <select class="form-select">
                                                <option data-i18n="stroke_free">Front Crawl (Freestyle)</option>
                                                <option data-i18n="stroke_breast">Breaststroke</option>
                                                <option data-i18n="stroke_back">Backstroke</option>
                                                <option data-i18n="stroke_fly">Butterfly</option>
                                            </select>
                                        </div>

                                        <hr class="my-4 text-secondary">
                                        <h6 class="text-primary mb-3">
                                            <ion-icon name="options-outline" class="me-2"></ion-icon>
                                            <span data-i18n="meta_optional">Video Metadata (Optional)</span>
                                        </h6>
                                        <p class="small text-secondary mb-3" data-i18n="meta_desc">Manually enter data
                                            for
                                            better AI accuracy.</p>

                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="meta_label_dist">Total Distance
                                                (m)</label>
                                            <input type="number" class="form-control" id="manualSwimDist"
                                                placeholder="e.g. 50">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="meta_label_time">Total Time (s) or
                                                Pace</label>
                                            <input type="text" class="form-control" id="manualSwimTime"
                                                placeholder="e.g. 30 (seconds)">
                                            <div class="form-text small" data-i18n="meta_doc_time">Use seconds (e.g.
                                                45.5)
                                                for best results.</div>
                                        </div>

                                        <button type="button" class="btn btn-primary w-100 mt-2" id="btnAnalyzeSwim"
                                            disabled>
                                            <ion-icon name="sparkles" class="me-2"></ion-icon><span
                                                data-i18n="btn_analyze">Analyze with AI</span>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Common JS (Sidevar, i18n) -->
    <script src="js/common.js"></script>
    <!-- Video Processing JS -->
    <script src="js/video_processor.js"></script>
    <!-- Module JS -->
    <script src="js/swimming.js"></script>
</body>

</html>